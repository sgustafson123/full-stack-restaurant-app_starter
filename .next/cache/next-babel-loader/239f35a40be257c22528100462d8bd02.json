{"ast":null,"code":"import { gql, useQuery } from '@apollo/client';\nimport Dishes from \"./dishes\";\nimport { useContext, useState } from 'react';\nimport AppContext from \"./context\";\nimport { Button, Card, CardBody, CardImg, CardText, CardTitle, Container, Row, Col } from \"reactstrap\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nfunction RestaurantList(props) {\n  const {\n    0: restaurantID,\n    1: setRestaurantID\n  } = useState(0);\n  const {\n    cart\n  } = useContext(AppContext);\n  const {\n    0: state,\n    1: setState\n  } = useState(cart);\n  const GET_RESTAURANTS = gql`\n    query {\n      restaurants {\n        id\n        name\n        description\n        image {\n          url\n        }\n      }\n    }\n  `;\n  const {\n    loading,\n    error,\n    data\n  } = useQuery(GET_RESTAURANTS);\n  if (loading) return /*#__PURE__*/_jsx(\"p\", {\n    children: \"Loading...\"\n  });\n  if (error) return /*#__PURE__*/_jsx(\"p\", {\n    children: \"ERROR\"\n  });\n  if (!data) return /*#__PURE__*/_jsx(\"p\", {\n    children: \"Not found\"\n  });\n  console.log(`Query Data: ${data.restaurants}`);\n  let searchQuery = data.restaurants.filter(res => {\n    return res.name.toLowerCase().includes(props.search);\n  });\n  let restId = searchQuery[0].id;\n\n  // definet renderer for Dishes\n  const renderDishes = restaurantID => {\n    return /*#__PURE__*/_jsx(Dishes, {\n      restId: restaurantID,\n      children: \" \"\n    });\n  };\n  if (searchQuery.length > 0) {\n    const restList = searchQuery.map(res => /*#__PURE__*/_jsx(Col, {\n      xs: \"6\",\n      sm: \"4\",\n      children: /*#__PURE__*/_jsxs(Card, {\n        style: {\n          margin: \"0 0.5rem 20px 0.5rem\"\n        },\n        children: [/*#__PURE__*/_jsx(CardImg, {\n          top: true,\n          style: {\n            height: 200\n          },\n          src: `http://localhost:1337` + res.image.url\n        }), /*#__PURE__*/_jsx(CardBody, {\n          children: /*#__PURE__*/_jsx(CardText, {\n            children: res.description\n          })\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: \"card-footer\",\n          children: /*#__PURE__*/_jsx(Button, {\n            color: \"info\",\n            onClick: () => setRestaurantID(res.id),\n            children: res.name\n          })\n        })]\n      })\n    }, res.id));\n    return /*#__PURE__*/_jsxs(Container, {\n      children: [/*#__PURE__*/_jsx(Row, {\n        xs: \"3\",\n        children: restList\n      }), /*#__PURE__*/_jsx(Row, {\n        xs: \"3\",\n        children: renderDishes(restaurantID)\n      })]\n    });\n  } else {\n    return /*#__PURE__*/_jsx(\"h1\", {\n      children: \" No Restaurants Found\"\n    });\n  }\n}\nexport default RestaurantList;","map":null,"metadata":{},"sourceType":"module"}